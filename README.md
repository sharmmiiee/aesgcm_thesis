# aesgcm_thesis

Repository for the AES-GCM algorithm codes and configuration for Sharmine and Neethu's master thesis project.

_____
## Directory: core

This directory is originally cloned from https://github.com/litex-hub/pythondata-cpu-cv32e40p.git.\
It is to simulate the AES-GCM using CV32E40P RISC-V core and to view the dumped waveform using verilator.

Usage:
```
$ make clean
$ make aesgcm-veri-run                        #for simulating AES-GCM
$ make asmtest-veri-run                       #for simulating the new instructions
$ make aesgcm-veri-run VERI_FLAGS=+vcd        #for simulating AES-GCM and dumping waveform
$ make asmtest-veri-run VERI_FLAGS=+vcd       #for simulating the new instructions and dumping waveforms
```

Make sure to select CFLAGS in the Makefile to identify which test case is needed for simulating the AES-GCM.
____

## Directory: demo

This directory is originally cloned from https://github.com/enjoy-digital/litex.git. \
The LiteX framework creates FPGA Cores/SoCs.\
Used for evaluating the AES-GCM algorithm using PYNQ-Z2 FPGA.

Usage:

For teminal 1:
```
$ dmesg | grep tty
$ # look for: ch341-uart converter now attached to ttyUSBX
$ sudo chmod a+rw /dev/ttyUSBX
$ litex_term --kernel demo.bin /dev/ttyUSBX
```

For
terminal 2:
```
$ source /opt/Xilinx/Vivado/2020.1/settings64.sh
$ python3 -m litex_boards.targets.tul_pynq_z2 --build --load
$ make clean
$ make all
$ python3 -m litex_boards.targets.tul_pynq_z2 --load

```

 Terminal 1 output generated by the litex_term command:

 ```
sharmine@sharmine-ThinkPad-T470p:~/Documents/thesis/litex/litex/soc/software/demo$  litex_term --kernel demo.bin /dev/ttyUSB0

        __   _ __      _  __
       / /  (_) /____ | |/_/
      / /__/ / __/ -_)>  <
     /____/_/\__/\__/_/|_|
   Build your hardware, easily!

 (c) Copyright 2012-2023 Enjoy-Digital
 (c) Copyright 2007-2015 M-Labs

 BIOS built on May  1 2024 20:50:54
 BIOS CRC passed (f06a2caf)

 LiteX git sha1: bedfb58

--=============== SoC ==================--
CPU:		CV32E40P @ 50MHz
BUS:		WISHBONE 32-bit @ 4GiB
CSR:		32-bit data
ROM:		128.0KiB
SRAM:		8.0KiB
MAIN-RAM:	36.0KiB

--========== Initialization ============--
Memtest at 0x40000000 (36.0KiB)...
  Write: 0x40000000-0x40009000 36.0KiB   
   Read: 0x40000000-0x40009000 36.0KiB   
Memtest OK
Memspeed at 0x40000000 (Sequential, 36.0KiB)...
  Write speed: 32.3MiB/s
   Read speed: 32.1MiB/s

--============== Boot ==================--
Booting from serial...
Press Q or ESC to abort boot completely.
sL5DdSMmkekro
[LITEX-TERM] Received firmware download request from the device.
[LITEX-TERM] Uploading demo.bin to 0x40000000 (23652 bytes)...
[LITEX-TERM] Upload calibration... (inter-frame: 10.00us, length: 64)
[LITEX-TERM] Upload complete (9.9KB/s).
[LITEX-TERM] Booting the device.
[LITEX-TERM] Done.
Executing booted program at 0x40000000

--============= Liftoff! ===============--

LiteX minimal demo app built May  1 2024 21:16:42

Available commands:
help               - Show this command
reboot             - Reboot CPU
led                - Led demo
donut              - Spinning Donut demo
helloc             - Hello C
aesgcm             - AES-GCM implementation
asmtest            - MULCLH, MULCL, MULCLHI and MULCLI
litex-demo-app> 
```

Then, enter "aesgcm" to test verify the AES-GCM encryption/decryption output.

Enter "asmtest" to see the list and output of the new instructions (mulclh, mulcl, immediate), solely for testing purposes and not for application in AES-GCM

Make sure to select CFLAG_OPTION in the Makefile to identify which test case is needed for simulating the AES-GCM.

___

## Directory: rtl

This directory contains the RTL of cv32e40p RISC-V and includes the additional module for carry-less multiplication.

___

Other directories are for the environment setup.
   
